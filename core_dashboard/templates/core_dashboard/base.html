{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EY Venezuela Revenue Dashboard</title>
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        :root {
            --ey-yellow: #FFCC00;
            --ey-black: #000000;
            --ey-dark-grey: #333333;
            --ey-medium-grey: #555555;
            --ey-light-grey: #AAAAAA;
            --ey-white: #FFFFFF;
            --ey-blue: #003366; /* Darker blue for contrast */
            --ey-green: #669900; /* Green for contrast */
            --ey-red: #CC0000; /* Red for contrast */
            --ey-purple: #663399; /* Purple for contrast */

            /* Material Design-like Shadows */
            --shadow-1: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            --shadow-2: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
            --shadow-3: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
        }

        body {
            font-family: 'Roboto', sans-serif; /* Clean, modern font */
            background-color: var(--ey-black); /* Main background */
            color: var(--ey-white); /* Default text color */
            margin: 0;
            display: flex;
            min-height: 100vh;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 260px;
            background-color: var(--ey-dark-grey); /* Sidebar background */
            color: var(--ey-white);
            padding: 20px;
            box-shadow: var(--shadow-2);
            position: fixed;
            height: 100%;
            overflow-y: auto;
            z-index: 1000;
            transition: all 0.3s ease-in-out;
        }
        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .sidebar-header img {
            height: 80px; /* Larger logo in sidebar */
            margin-bottom: 10px;
        }
        .sidebar-header h3 {
            color: var(--ey-yellow);
            font-size: 1.5rem;
            margin: 0;
        }
        .sidebar-header .tagline {
            font-size: 0.8rem;
            color: var(--ey-light-grey);
        }
        .sidebar-nav ul {
            list-style: none;
            padding: 0;
        }
        .sidebar-nav ul li {
            margin-bottom: 10px;
        }
        .sidebar-nav ul li a {
            display: flex; /* Use flexbox */
            align-items: center; /* Align items vertically */
            gap: 10px; /* Add some space between icon and text */
            color: var(--ey-white);
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 5px;
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .sidebar-nav ul li a:hover {
            background-color: rgba(255, 204, 0, 0.2); /* Yellow tint on hover */
            color: var(--ey-yellow);
        }
        .sidebar-nav ul li a.active {
            background-color: var(--ey-yellow);
            color: var(--ey-black);
            font-weight: bold;
        }

        /* Main Content Area */
        .main-panel {
            margin-left: 260px; /* Offset for sidebar */
            width: calc(100% - 260px);
            position: relative;
            min-height: 100vh;
            background-color: var(--ey-black); /* Match body background */
            padding-bottom: 60px; /* Space for fixed news ticker at bottom */
        }

        .main-panel .content {
            width: 100%;
            padding: 20px; /* Apply padding here */
        }

        /* Navbar Styles (Top Bar) */
        .navbar {
            background-color: var(--ey-yellow);
            color: var(--ey-black);
            padding: 10px 25px;
            box-shadow: var(--shadow-1);
            z-index: 1020; /* Below sidebar */
            position: sticky; /* Stays at top when scrolling */
            top: 0;
            width: calc(100% - 260px); /* Adjust width for sidebar */
            margin-left: 260px;
            border-radius: 0 0 10px 10px; /* Rounded bottom corners */
        }
        .navbar-text {
            color: var(--ey-black);
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* Card Styles */
        .card {
            background-color: var(--ey-dark-grey);
            color: var(--ey-white);
            border: none;
            border-radius: 10px;
            box-shadow: var(--shadow-1); /* Lighter shadow for cards */
            margin-bottom: 25px;
            transition: all 0.3s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-2); /* Stronger shadow on hover */
        }
        .card-header {
            background-color: var(--ey-yellow);
            color: var(--ey-black);
            font-weight: bold;
            padding: 15px 20px;
            border-bottom: none;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            font-size: 1.2rem;
        }
        .card-body {
            padding: 20px;
        }

        /* Form Styles */
        .form-label {
            color: var(--ey-light-grey);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        .form-select, .form-control {
            background-color: var(--ey-medium-grey);
            color: var(--ey-white);
            border: 1px solid var(--ey-yellow);
            padding: 0.75rem 1.25rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .form-select:focus, .form-control:focus {
            border-color: var(--ey-yellow);
            box-shadow: 0 0 0 0.25rem rgba(255, 204, 0, 0.25);
            background-color: var(--ey-medium-grey);
            color: var(--ey-white);
        }
        .form-select option {
            background-color: var(--ey-medium-grey);
            color: var(--ey-white);
        }

        /* Button Styles */
        .btn-primary {
            background-color: var(--ey-yellow);
            border-color: var(--ey-yellow);
            color: var(--ey-black);
            font-weight: bold;
            padding: 0.75rem 1.8rem;
            border-radius: 8px;
            box-shadow: var(--shadow-1);
        }
        .btn-primary:hover {
            background-color: #e6b800;
            border-color: #e6b800;
            box-shadow: var(--shadow-2);
        }
        .btn-secondary {
            background-color: var(--ey-medium-grey);
            border-color: var(--ey-medium-grey);
            color: var(--ey-white);
            font-weight: bold;
            padding: 0.75rem 1.8rem;
            border-radius: 8px;
            box-shadow: var(--shadow-1);
        }
        .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
            box-shadow: var(--shadow-2);
        }

        /* Table Styles */
        .table-responsive {
            border-radius: 8px;
            overflow: auto; /* Changed from hidden to auto for scrolling */
        }
        .table-dark {
            --bs-table-bg: var(--ey-dark-grey);
            --bs-table-striped-bg: var(--ey-medium-grey);
            --bs-table-striped-color: var(--ey-white);
            --bs-table-active-bg: var(--ey-medium-grey);
            --bs-table-active-color: var(--ey-yellow);
            --bs-table-hover-bg: var(--ey-medium-grey);
            --bs-table-hover-color: var(--ey-yellow);
            color: var(--ey-white);
        }
        .table-dark th, .table-dark td {
            border-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
        }
        .table-dark thead th {
            background-color: var(--ey-medium-grey);
            color: var(--ey-yellow);
            border-bottom: 2px solid var(--ey-yellow);
            font-size: 1rem;
        }

        /* Chart Styles */
        .chart-container {
            background-color: var(--ey-white);
            border-radius: 8px;
            padding: 15px;
            box-shadow: var(--shadow-1);
        }
        canvas {
            background-color: transparent !important;
        }

        /* News Ticker */
        .news-ticker-container {
            background-color: var(--ey-yellow);
            color: var(--ey-black);
            padding: 10px 0;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: fixed; /* Fixed position */
            bottom: 0; /* At the bottom */
            
            left: 0; /* From the left edge */
            width: 100%; /* Full width */
            z-index: 1050; /* High z-index to stay on top */
            margin-left: 260px; /* Offset for sidebar */
            width: calc(100% - 260px); /* Adjust width for sidebar */
        }
        .news-ticker-content {
            display: flex;
            animation: ticker 60s linear infinite;
            white-space: nowrap; /* Prevent line breaks */
        }
        .news-item {
            font-size: 1rem;
            padding: 0 2rem; /* Space between items */
            font-weight: 500;
        }

        @keyframes ticker {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }

        /* Collapsible Filter */
        .filter-header {
            background-color: var(--ey-yellow);
            color: var(--ey-black);
            font-weight: bold;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            box-shadow: var(--shadow-1);
            transition: all 0.3s ease;
        }
        .filter-header:hover {
            background-color: #e6b800;
            box-shadow: var(--shadow-2);
        }
        .filter-header .toggle-icon {
            transition: transform 0.3s ease;
            font-size: 1.5rem;
        }
        .filter-header[aria-expanded="true"] .toggle-icon {
            transform: rotate(180deg);
        }
        #filterBody {
            background-color: var(--ey-dark-grey);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow-1);
        }

        /* General Spacing */
        .mb-4 { margin-bottom: 25px !important; }
        .mt-4 { margin-top: 25px !important; }
        .g-3 { --bs-gutter-x: 1.5rem; --bs-gutter-y: 1.5rem; }

        /* Specific Layout Adjustments */
        .kpi-card-value { 
            font-size: 2rem; 
            margin-top: 10px; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis; 
        }
        .kpi-card-title { font-size: 1.1rem; margin-bottom: 0; }

        /* Section Titles */
        .section-title {
            color: var(--ey-yellow);
            font-size: 1.8rem;
            font-weight: bold;
            margin-top: 40px;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid var(--ey-yellow);
            padding-bottom: 10px;
        }

        /* Scoped responsive rule for preview pages to avoid extra right-side whitespace */
        .preview-centered {
            box-sizing: border-box; /* include padding in width calculations */
            padding-left: 1rem;
            padding-right: 1rem;
            margin-left: auto;
            margin-right: auto;
            width: 100%;
            max-width: none; /* allow it to expand into main-panel space */
            overflow-x: hidden; /* guard against accidental horizontal overflow */
        }

        /* On medium and larger screens let the preview take the available main-panel width (account for sidebar) */
        @media (min-width: 992px) {
            .preview-centered {
                /* main-panel has a left offset of 260px for the sidebar; subtract some padding for breathing room */
                width: calc(100% - 300px);
                padding-left: 2rem;
                padding-right: 2rem;
            }
        }

        /* Slightly increase on ultra-wide screens */
        @media (min-width: 1600px) {
            .preview-centered {
                width: calc(100% - 340px);
            }
        }

    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <img src="{% static 'core_dashboard/ey_logo.png' %}" alt="EY Logo">
                <h3>EYDeck</h3>
                <span class="tagline">Shape the future with confidence</span>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="{% url 'dashboard' %}" class="active"><span class="material-icons-round">dashboard</span> Dashboard</a></li>
                    <li><a href="{% url 'upload_file' %}"><span class="material-icons-round">upload_file</span> Upload Files</a></li>
                    <li><a href="{% url 'analysis' %}"><span class="material-icons-round">analytics</span> Analysis</a></li>
                    <li><a href="{% url 'messaging' %}"><span class="material-icons-round">message</span> Messaging</a></li>
                    <li><a href="{% url 'data_downloads' %}"><span class="material-icons-round">download</span> Data Downloads</a></li>
                </ul>
            </nav>
        </div>

        <!-- Main Panel -->
        <div class="main-panel">
            <!-- Navbar (Top Bar) -->
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <span class="navbar-text">Overview Dashboard</span>
                </div>
            </nav>

            <div class="content">
                {% block content %}
                <!-- Page specific content will be inserted here -->
                {% endblock %}
            </div>

            <!-- News Ticker -->
            <div class="news-ticker-container">
                <div class="news-ticker-content">
                    {% for highlight in highlights %}
                        <span class="news-item">{{ highlight }}</span>
                    {% endfor %}
                    {% for highlight in highlights %}
                        <span class="news-item">{{ highlight }}</span>
                    {% endfor %}
                </div>
            </div>

            <!-- Bootstrap Bundle with Popper -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
            {% block extra_js %}{% endblock %}
        </body>
        </html>